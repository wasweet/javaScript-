<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
	</head>
	<body>
		<script type="text/javascript">
			function sendAJAX(url) {
				return new Promise((resolve,reject) => {
					
				// 1 创建对象
				const x = new XMLHttpRequest()
				
				// 2 初始化
				x.open('GET', url)
				
				// 3 发送
				x.send()
				// 4 绑定事件
				x.onreadystatechange = function() {
					if(x.readyState === 4) {
						if(x.status >= 200 && x.status < 300) {
							resolve(x.response)
						} else {
							reject(x.status)
						}
					}
				}
				})
			}
		
			// 1 测试  Promise then 方法
			// sendAJAX("https://api.apiopen.top/getJoke").then((res) => {
			// 	console.log(res)
			// },(err) => {
				
			// })
			
			// 2 async 与await 测试
			async function fn() {
				let result = await sendAJAX("https://api.apiopen.top/getJoke")
				console.log(result)
			}
			fn()
		</script>
	</body>
</html>
